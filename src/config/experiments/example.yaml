# example config file for kandinsky2.2 lora train

SYSTEM:
  NUM_GPUS: 1
  NUM_WORKERS: 4
  RANDOM_SEED: 42
ACCELERATOR:
  ACCUMULATION_STEPS: 1
  MIXED_PRECISION: "fp16"
OPTIMIZER:
  LEARNING_RATE: 1e-4
  ADAM_WEIGHT_DECAY: 0.0
  ADAM_EPSILON: 1e-8
SCHEDULER:
  NAME: 'constant_with_warmup'
  WARMUP_STEPS: 0
  PREDICTION_TYPE: 'epsilon'
  SNR_GAMMA: 5
TRAIN:
  NUM_EPOCHS: 40
  TRAIN_BATCH_SIZE: 256
  VAL_BATCH_SIZE: 256
  FID_BATCH_SIZE: 100
  IMAGE_VALIDATION_EPOCHS: 5
  FID_VALIDATION_EPOCHS: 5
  TRAIN_IMAGE_RESOLUTION: 256
  VAL_IMAGE_RESOLUTION: 256
  NUM_INFERENCE_STEPS: 150
  DATALOADER_NUM_WORKERS: 2
LORA:
  RANK: 8
  ALPHA: 8
  HIDDEN_SIZE: 2048
  MAX_GRADIENT_NORM: 1.0
  USE_DORA: False
  USE_RSLORA: False
WANDB:
  PROJECT_NAME: 'Example Project'
  RUN_NAME: 'test_run'
PATHS:
  KANDINSKY2_PRIOR_LORA_WEIGHTS_SUBFOLDER: 'kandi2_prior'
  KANDINSKY2_DECODER_LORA_WEIGHTS_SUBFOLDER: 'kandi2_decoder'
EXPERIMENT:
  LOAD_LORA_WEIGHTS: False
  LOAD_LORA_TO_PIPELINE: False
  SAVE_BEST_FID_CHECKPOINTS: False
  FID_VALIDATION: True
